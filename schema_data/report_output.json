{
    "$schema": "https://json-schema.org/schema#",
    "type": "object",
    "description":"Define the output report single sample in InForm.",
    "definitions":{
        "sample_cumulative_density_row":{
            "type":"object",
            "properties":{
                "region_name":{
                    "type":"string"
                },
                "population_name":{
                    "type":"string"
                },
                "cumulative_region_area_pixels":{
                    "type":"integer"
                },
                "cumulative_region_area_mm2":{
                    "type":"number"
                },
                "cumulative_count":{
                    "type":"integer"
                },
                "cumulative_density_mm2":{
                    "type":"number"
                },
                "image_count":{
                    "type":"number"
                },
                "measure_qc_pass":{
                    "type":"boolean"
                }
            },
            "additionalProperties":false,
            "required":["region_name","population_name",
                        "cumulative_region_area_pixels","cumulative_region_area_mm2","cumulative_count","cumulative_density_mm2",
                        "image_count","measure_qc_pass"
                       ]
        },
        "sample_aggregate_density_row":{
            "type":"object",
            "properties":{
                "region_name":{
                    "type":"string"
                },
                "population_name":{
                    "type":"string"
                },
                "aggregate_mean_density_mm2":{
                    "type":"number"
                },
                "aggregate_stddev_density_mm2":{
                    "type":"number"
                },
                "aggregate_stderr_density_mm2":{
                    "type":"number"
                },
                "image_count":{
                    "type":"number"
                },
                "aggregate_measured_image_count":{
                    "type":"number"
                },
                "measure_qc_pass":{
                    "type":"boolean"
                }
            },
            "additionalProperties":false,
            "required":["region_name","population_name",
                        "aggregate_mean_density_mm2","aggregate_stddev_density_mm2","aggregate_stderr_density_mm2",
                        "image_count","aggregate_measured_image_count","measure_qc_pass"
                       ]
        },
        "image_density_row":{
            "type":"object",
            "properties":{
                "region_name":{
                    "type":"string"
                },
                "population_name":{
                    "type":"string"
                },
                "region_area_pixels":{
                    "type":"integer"
                },
                "region_area_mm2":{
                    "type":"number"
                },
                "count":{
                    "type":"integer"
                },
                "density_mm2":{
                    "type":"number"
                },
                "measure_qc_pass":{
                    "type":"boolean"
                }
            },
            "additionalProperties":false,
            "required":["region_name","population_name","region_area_pixels","region_area_mm2","count","density_mm2","measure_qc_pass"]
        },
        "sample_cumulative_percentage_row":{
            "type":"object",
            "properties":{
                "region_name":{
                    "type":"string"
                },
                "population_name":{
                    "type":"string"
                },
                "cumulative_numerator_count":{
                    "type":"integer"
                },
                "cumulative_denominator_count":{
                    "type":"integer"
                },
                "cumulative_fraction":{
                    "type":"number"
                },
                "cumulative_percent":{
                    "type":"number"
                },
                "image_count":{
                    "type":"integer"
                },
                "measure_qc_pass":{
                    "type":"boolean"
                }
            },
            "additionalProperties":false,
            "required":["region_name","population_name",
                        "cumulative_numerator_count","cumulative_denominator_count","cumulative_fraction","cumulative_percent",
                        "image_count","measure_qc_pass"
                       ]
        },
        "sample_aggregate_percentage_row":{
            "type":"object",
            "properties":{
                "region_name":{
                    "type":"string"
                },
                "population_name":{
                    "type":"string"
                },
                "aggregate_mean_fraction":{
                    "type":"number"
                },
                "aggregate_stddev_fraction":{
                    "type":"number"
                },
                "aggregate_stderr_fraction":{
                    "type":"number"
                },
                "aggregate_mean_percent":{
                    "type":"number"
                },
                "aggregate_stddev_percent":{
                    "type":"number"
                },
                "aggregate_stderr_percent":{
                    "type":"number"
                },
                "image_count":{
                    "type":"integer"
                },
                "aggregate_measured_image_count":{
                    "type":"integer"
                },
                "measure_qc_pass":{
                    "type":"boolean"
                }
            },
            "additionalProperties":false,
            "required":["region_name","population_name",
                        "aggregate_mean_fraction","aggregate_stddev_fraction","aggregate_stderr_fraction",
                        "aggregate_mean_percent","aggregate_stddev_percent","aggregate_stderr_percent",
                        "image_count","aggregate_measured_image_count","measure_qc_pass"
                       ]
        },
        "image_percentage_row":{
            "type":"object",
            "properties":{
                "region_name":{
                    "type":"string"
                },
                "population_name":{
                    "type":"string"
                },
                "numerator_count":{
                    "type":"integer"
                },
                "denominator_count":{
                    "type":"integer"
                },
                "fraction":{
                    "type":"number"
                },
                "percent":{
                    "type":"number"
                },
                "measure_qc_pass":{
                    "type":"boolean"
                }
            },
            "additionalProperties":false,
            "required":["region_name","population_name","numerator_count","denominator_count","fraction","percent","measure_qc_pass"]
        }
    },
    "properties":{
        "run_id":{
            "type":"string"
        },
        "time":{
            "type":"string"
        },
        "project_name":{
            "type":"string"
        },
        "report_name":{
            "type":"string"
        },
        "report_version":{
            "type":"string"
        },
        "analysis_name":{
            "type":"string"
        },
        "analysis_version":{
            "type":"string"
        },
        "panel_name":{
            "type":"string"
        },
        "panel_version":{
            "type":"string"
        },
        "sample_outputs":{
            "type":"array",
            "items":{
                "type":"object",
                "properties":{
                    "sample_name":{
                        "type":"string"
                    },
                    "sample_reports":{
                        "type":"object",
                        "properties":{
                            "sample_cumulative_count_densities":{
                                "description":"Report for aggrogated measurements within a sample for density.",
                                "type":"array",
                                "items":{"$ref":"#/definitions/sample_cumulative_density_row"}
                            },
                            "sample_aggregate_count_densities":{
                                "description":"Report for aggrogated measurements within a sample for density.",
                                "type":"array",
                                "items":{"$ref":"#/definitions/sample_aggregate_density_row"}
                            },
                            "sample_cumulative_count_percentages":{
                                "description":"Report for aggrogated measurements within a sample for percentages.",
                                "type":"array",
                                "items":{"$ref":"#/definitions/sample_cumulative_percentage_row"}
                            },
                            "sample_aggregate_count_percentages":{
                                "description":"Report for aggrogated measurements within a sample for percentages.",
                                "type":"array",
                                "items":{"$ref":"#/definitions/sample_aggregate_percentage_row"}
                            }
                        },
                        "additionalProperties":false,
                        "required":["sample_cumulative_count_densities","sample_aggregate_count_densities",
                                    "sample_cumulative_count_percentages","sample_aggregate_count_percentages"]
                    },
                    "images":{
                        "type":"array",
                        "items":{
                            "type":"object",
                            "properties":{
                                "image_name":{
                                    "type":"string"
                                },
                                "image_reports":{
                                    "type":"object",
                                    "properties":{
                                        "image_count_densities":{
                                            "description":"Report for density in a given image.",
                                            "type":"array",
                                            "items":{"$ref":"#/definitions/image_density_row"}
                                        },
                                        "image_count_percentages":{
                                            "description":"Report for measurements within a frame for percentages.",
                                            "type":"array",
                                            "items":{"$ref":"#/definitions/image_percentage_row"}
                                        }
                                    },
                                    "additionalProperties":false,
                                    "required":["image_count_densities","image_count_percentages"]
                                }
                            },
                            "additionalProperties":false,
                            "required":["image_name","image_reports"]
                        }
                    }
                },
                "additionalProperties":false,
                "required":["sample_name","sample_reports","images"]
            }
        }
    },
    "additionalProperties":false,
    "required":["run_id","time",
                "project_name","report_name","report_version","analysis_name","analysis_version","panel_name","panel_version",
                "sample_outputs"]
}
