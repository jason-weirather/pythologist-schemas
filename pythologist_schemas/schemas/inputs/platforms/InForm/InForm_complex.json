{
    "$schema": "https://json-schema.org/schema#",
    "type": "object",
    "definitions":{
        "image_export":{
            "ref":"./InForm.json"
        },
        "sample_export":{
            "type":"object",
            "description":"A collection of imageExports that make up a sample.",
            "properties":{
                "sampleName":{"type":"string"},
                "image_exports":{
                    "type":"array",
                    "items":{"$ref":"#/definitions/image_export"}
                }
            },
            "additionalProperties":false,
            "required":["sample_name","image_exports"]
        },
        "single_project_export":{
            "description":"A collection of exports, but may not contain all the threshold strategies.",
            "properties":{
                "single_project_export_name":{"type":"string"},
                "annotations":{
                    "ref":"../annotations.json"
                },
                "rules":{
                    "type":"object",
                    "description":"If there are multiple InForm exports present, these rules define which features of this export to keep on merge",
                    "properties":{
                        "is_primary_mutually_exclusive_phenotyping":{
                            "type":"boolean",
                            "description":"if True, this project export is the basis for mutually exclusive phenotyping.  Other mutually exclusive phenotyping to captured from other exports should be converted to a binary phenotype in the rules defined here. At least one project must be primary."
                        },
                        "mutually_exclusive_phenotypes_to_keep_as_binary_phenotypes":{
                            "description":"This export has been phenotyped for something intended downstream to be treated as a thresholded marker.",
                            "type":"array",
                            "items":{
                                "type":"object",
                                "properties":{
                                    "mutually_exclusive_phenotype":{
                                        "description":"This needs to be a mutually exclusive phenotype defined by the annotations.",
                                        "type":"string"
                                    },
                                    "binary_phenotype_name":{
                                        "description":"This does NOT need to be a mutually exclusive phenotype defined by the panel.",
                                        "type":"string"
                                   }
                               }
                           }
                        },
                        "binary_phenotypes_to_keep":{
                            "description":"This is a list of binary phenotypes to keep from this project. If not set take merge all binary phenotypes.",
                            "type":"array",
                            "items":{
                                "type":"string",
                                "description":"Valid name of a binary phenotype."
                            }
                        }
                    },
                    "required":["is_primary_mutually_exclusive_phenotyping"]
                },
                "sampleExports":{
                    "type":"array",
                    "items":{"$ref":"#/definitions/sample_exports"}
                }
            },
            "additionalProperties":false,
            "required":["annotations","single_project_export_name","is_primary_mutually_exclusive_phenotyping","rules","scored_marker_names","sample_exports"]
        }
    },
     "properties":{
        "microns_per_pixel":{"type":"number"},
        "single_project_exports":{
            "type":"array",
            "minItems":1,
            "description":"Describe expected components of an InForm project exports. This is a list of exports from the same project for the purpose of combining thresholding strategies.",
            "items":{"$ref":"#/definitions/single_project_export"}
        },
        "meta":{
            "type":"object",
            "properties":{
                "project_name":{"type":"string"}
            }
        }
    },
    "required":["microns_per_pixel","single_project_exports"]
}
